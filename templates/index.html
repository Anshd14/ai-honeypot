<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Agentic Honeypot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Agentic Honeypot for Scam Detection</h1>
        <form id="honeypotForm">
            <label for="sessionId">Session ID:</label>
            <input type="text" id="sessionId" name="sessionId" required>

            <label for="message">Message Text:</label>
            <textarea id="message" name="message" rows="4" required></textarea>

            <label for="apiKey">API Key:</label>
            <input type="text" id="apiKey" name="apiKey" required>

            <button type="submit">Submit</button>
        </form>
        <div id="responseBox"></div>
    </div>

    <script>
        document.getElementById("honeypotForm").addEventListener("submit", async function(e) {
            e.preventDefault();
            const sessionId = document.getElementById("sessionId").value;
            const message = document.getElementById("message").value;
            const apiKey = document.getElementById("apiKey").value;

            const payload = {
                sessionId: sessionId,
                message: {
                    sender: "scammer",
                    text: message,
                    timestamp: Date.now()
                },
                conversationHistory: [],
                metadata: {
                    channel: "Web",
                    language: "English",
                    locale: "IN"
                }
            };

            const res = await fetch("/honeypot", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "x-api-key": apiKey
                },
                body: JSON.stringify(payload)
            });

            const data = await res.json();
            document.getElementById("responseBox").innerHTML =
                `<h2>Response</h2><pre>${JSON.stringify(data, null, 2)}</pre>`;
        });
    </script>
</body>
</html>
